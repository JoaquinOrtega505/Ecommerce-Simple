<div class="verification-container">
  <div class="verification-card">
    <div class="verification-header">
      <h2>Verificación de Email</h2>
      <p>Hemos enviado un código de verificación de 6 dígitos a:</p>
      <strong>{{ email }}</strong>
    </div>

    <form [formGroup]="verificationForm" (ngSubmit)="onSubmit()" class="verification-form">
      <div class="form-group">
        <label for="codigo">Código de Verificación</label>
        <input
          type="text"
          id="codigo"
          formControlName="codigo"
          class="form-control"
          placeholder="000000"
          maxlength="6"
          [class.is-invalid]="codigoControl?.invalid && codigoControl?.touched"
        />
        <div *ngIf="codigoControl?.invalid && codigoControl?.touched" class="invalid-feedback">
          <small *ngIf="codigoControl?.errors?.['required']">El código es requerido</small>
          <small *ngIf="codigoControl?.errors?.['pattern']">El código debe tener 6 dígitos</small>
        </div>
        <small class="form-text">El código expira en 15 minutos</small>
      </div>

      <div *ngIf="error" class="alert alert-danger">
        {{ error }}
      </div>

      <div *ngIf="success" class="alert alert-success">
        {{ success }}
      </div>

      <button
        type="submit"
        class="btn btn-primary btn-block"
        [disabled]="loading || verificationForm.invalid"
      >
        <span *ngIf="!loading">Verificar Código</span>
        <span *ngIf="loading">Verificando...</span>
      </button>
    </form>

    <div class="resend-section">
      <p>¿No recibiste el código?</p>
      <button
        type="button"
        class="btn btn-link"
        (click)="reenviarCodigo()"
        [disabled]="resendCooldown > 0 || loading"
      >
        <span *ngIf="resendCooldown === 0">Reenviar código</span>
        <span *ngIf="resendCooldown > 0">Reenviar en {{ resendCooldown }}s</span>
      </button>
    </div>

    <div class="back-link">
      <a routerLink="/login">Volver al login</a>
    </div>
  </div>
</div>
